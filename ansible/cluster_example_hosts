[all]
# When the host names cannot be resolved, add "ansible_host=<IP ADDRESS>" with
# the respective IP address of the individual machine to the host definitions.
lb1 private_ip=10.0.1.3
lb2 private_ip=10.0.1.4
tw1 private_ip=10.0.1.5
tw2 private_ip=10.0.1.6
tw3 private_ip=10.0.1.7
db1 private_ip=10.0.1.21
db2 private_ip=10.0.1.22
db3 private_ip=10.0.1.23

[all:vars]
# Optional parameters for the ssh client
# ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
# The user name used to connect to the given machines
# ansible_user=teamwire
# The private key of the user given above
# ansible_ssh_private_key_file=/path/to/private/key


# The following blocks configure which of the roles will be installed on which
# of the machines defined in the [all] section above. The comments above the
# blocks explain if the role is optional or mandatory for a clustered setup.

# Required. At least 1 management server required. This is the role which
# will handle Ansible provisioning and twctl management
[management_servers]
tw1

# Mandatory, three or five servers.
# This group of servers will host the Hashicorp stack in server-mode (Consul, Nomad and Vault).
[hashi_servers]
db1
db2
db3

# Three servers are required.
[redis_servers]
db1
db2
db3

# Optional. If you run a MySQL or Oracle database you can use that.
# When installing the database as part of the cluster, three or five
# servers are required.
[database_servers]
db1
db2
db3

# Define the servers which you want to act as storage server (glusterfs) nodes. 
# You may comment out the storage_servers group and server list if you are going
# to use an external fileshare server, please check the file storage section of the
# all.example file for more information on this.
[storage_servers]
db1
db2
db3

# Required when installing without external connection. Optional but heavily
# recommended when access to the outside world is enabled. Multiple hosts can
# be configured to ensure redundancy.
[docker_registry]
db1

# Define where logs generated by all docker containers are sent to.
# Optional but heavily recommended. Multiple targets are supported.
[loghost]
db1

# Required. Choose a number of servers that can handle the load generated by
# your client applications.
[backend_servers]
tw1
tw2
tw3

# Required. This role can be installed on the same servers as the backend
# when an existing load balancer is used.
[frontend_servers]
lb1
lb2

# Optional. This role allows you to expose a single IP address (configured in
# the section below) to the client application while maintaining redundancy.
[load_balancers]
lb1
lb2

[load_balancers:vars]
loadbalancer_external_ip=10.0.1.2
loadbalancer_password="12secr34"

# Optional. This role allows you to configure on-premise monitoring.
# Here you should specify the server to install the monitoring master service on.
# The relevant agent will automatically install on all servers in the cluster.
[monitoring]
tw1
